<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon Site avec Vraie IA</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        #chat-box { width: 400px; height: 500px; background: #2d2d2d; border-radius: 10px; display: flex; flex-direction: column; border: 1px solid #444; }
        #messages { flex: 1; padding: 20px; overflow-y: auto; font-size: 14px; }
        .user { color: #154de8; margin-bottom: 10px; }
        .ai { color: #ffffff; margin-bottom: 15px; border-left: 2px solid #00ffcc; padding-left: 10px; }
        #input-area { padding: 15px; display: flex; border-top: 1px solid #444; }
        input { flex: 1; background: #3d3d3d; border: none; color: white; padding: 10px; border-radius: 5px; outline: none; }
        button { background: #00ffcc; border: none; padding: 10px 15px; margin-left: 10px; border-radius: 5px; cursor: pointer; font-weight: bold; }
        #api-key-area { margin-bottom: 10px; font-size: 12px; }
    </style>
</head>
<body>

    <div id="api-key-area">
        Clé API : <input type="password" id="api-key" placeholder="Colle ta clé sk-..." style="width: 200px; font-size: 10px;">
    </div>

    <div id="chat-box">
        <div id="messages"></div>
        <div id="input-area">
            <input type="text" id="user-input" placeholder="Pose une question à jarvis...">
            <button onclick="askAI()">Envoyer</button>
        </div>
    </div>

<script>
    async function askAI() {
        const apiKey = document.getElementById('api-key').value;
        const userInput = document.getElementById('user-input').value;
        const messagesDiv = document.getElementById('messages');

        if (!apiKey) { alert("Oublie pas ta clé API !"); return; }
        if (!userInput) return;

        // Afficher le message de l'utilisateur
        messagesDiv.innerHTML += `<div class="user"><b>Toi:</b> ${userInput}</div>`;
        document.getElementById('user-input').value = "";

        try {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo", // ou "gpt-4" si tu as les droits
                    messages: [{role: "user", content: userInput}]
                })
            });

            const data = await response.json();
            const aiText = data.choices[0].message.content;

            // Afficher la réponse de l'IA
            messagesDiv.innerHTML += `<div class="ai"><b>IA:</b> ${aiText}</div>`;
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        } catch (error) {
            messagesDiv.innerHTML += `<div class="ai" style="color:red">Erreur : Vérifie ta clé ou ton crédit.</div>`;
        }
    }
</script>
</body>
</html>
